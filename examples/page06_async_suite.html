<!doctype html>
<html lang=en>
<head>
<meta charset=utf-8>
<title>gTest</title>
</head>
<body>
<script src="../gtest.js"></script>
<script>
(async function () {

const {suite, test} = gTest;

/**
 * This example shows async suite: they can take a while to do their job,
 * and so, we need to make sure that the tests defined inside are correctly
 * associated to the suite. This means that we serialize all suite calls.
 */

function wait(n) {
    return new Promise(resolve => {
        setTimeout(() => {
            resolve();
        }, n);
    })
}

suite('suite 1', async () => {

    await wait(100);

    test('test 1', async (assert) => {
        assert.equal(1 + 1, 2);
    });

    await wait(200);

    test('test 2', async (assert) => {
        assert.equal(1 + 1, 2);
    });
});

suite('suite 2', async () => {

    await wait(50);

    test('test 1', async (assert) => {
        assert.equal(1 + 1, 2);
    });

    await wait(150);

    test('test 2', async (assert) => {
        assert.equal(1 + 1, 2);
    });
});

suite('suite 3', async () => {

    await wait(110);

    test('test 1', async (assert) => {
        assert.equal(1 + 1, 2);
    });

    await wait(120);

    test('test 2', async (assert) => {
        assert.equal(1 + 1, 2);
    });
});

gTest.config.autostart = false;

})();

</script>
</body>
</html>